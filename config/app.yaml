# ============================================================================
# DeepMind Workspace â€” Application Configuration
# Edit this file to change behavior without code changes
# ============================================================================

app:
  name: "DeepMind Workspace"
  version: "1.0.0"
  host: "${APP_HOST:0.0.0.0}"
  port: ${APP_PORT:8080}
  secret_key: "${APP_SECRET_KEY}"
  env: "${APP_ENV:production}"
  log_level: "${APP_LOG_LEVEL:INFO}"

deepseek:
  api_key: "${DEEPSEEK_API_KEY}"
  base_url: "${DEEPSEEK_BASE_URL:https://api.deepseek.com/v1}"
  chat_model: "${DEEPSEEK_MODEL:deepseek-chat}"
  reasoning_model: "${DEEPSEEK_REASONING_MODEL:deepseek-reasoner}"
  max_tokens: 8192
  temperature: 0.7
  top_p: 0.95
  stream: true
  timeout_seconds: 120
  retry_attempts: 3
  retry_backoff: 2.0

openai:
  api_key: "${OPENAI_API_KEY}"
  base_url: "${OPENAI_BASE_URL:https://api.openai.com/v1}"
  model: "${OPENAI_MODEL:gpt-4o}"
  max_tokens: 4096
  temperature: 0.7
  top_p: 0.95
  stream: true
  timeout_seconds: 120
  retry_attempts: 3
  retry_backoff: 2.0

code_execution:
  enabled: true
  timeout_seconds: 300  # 5 minutes - fully configurable via UI
  max_output_bytes: 10485760  # 10MB - fully configurable
  max_recursion_depth: 1000
  allow_network: false  # Security: no external requests from code
  restricted_python: true  # AST-level sandboxing

image_generation:
  enabled: true
  provider: "together"  # Together AI for FLUX models
  api_key: "${TOGETHER_API_KEY}"
  base_url: "${TOGETHER_BASE_URL:https://api.together.xyz/v1}"
  
  # Model selection (priority order)
  models:
    ultra:  # Highest quality, unfiltered
      name: "black-forest-labs/FLUX.1-pro-ultra"
      max_width: 2048
      max_height: 2048
      steps: 50
      cost_per_image: 0.04
      unfiltered: true
    
    pro:  # High quality, unfiltered  
      name: "black-forest-labs/FLUX.1-pro"
      max_width: 1440
      max_height: 1440
      steps: 25
      cost_per_image: 0.02
      unfiltered: true
    
    dev:  # Good quality, fast
      name: "black-forest-labs/FLUX.1-dev"
      max_width: 1024
      max_height: 1024
      steps: 20
      cost_per_image: 0.01
      unfiltered: true
    
    schnell:  # Fast preview
      name: "black-forest-labs/FLUX.1-schnell"
      max_width: 1024
      max_height: 768
      steps: 4
      cost_per_image: 0.005
      unfiltered: false
  
  default_model: "pro"  # Balance of quality/speed/cost
  default_width: 1024
  default_height: 1024
  timeout_seconds: 180
  retry_attempts: 2
  save_to_disk: true
  output_dir: "/data/generated_images"
  inline_display: true  # ChatGPT-style inline rendering

database:
  sqlite_path: "${SQLITE_DB_PATH:./data/conversations.db}"
  chromadb_path: "${CHROMADB_PATH:./data/chromadb}"
  wal_mode: true
  busy_timeout_ms: 10000

context:
  max_tokens: ${MAX_CONTEXT_TOKENS:128000}
  summary_trigger_tokens: ${SUMMARY_TRIGGER_TOKENS:96000}
  recent_messages_keep: ${RECENT_MESSAGES_KEEP:20}
  summarization_model: "${DEEPSEEK_MODEL:deepseek-chat}"
  summarization_max_tokens: 2048
  overlap_messages: 3

embeddings:
  model: "${EMBEDDING_MODEL:all-MiniLM-L6-v2}"
  dimension: ${EMBEDDING_DIMENSION:384}
  chunk_size: 1000
  chunk_overlap: 200
  batch_size: 64
  relevance_threshold: 0.35
  max_results: 8

connectors:
  github:
    enabled: true
    token: "${GITHUB_TOKEN}"
    default_org: "${GITHUB_DEFAULT_ORG:}"
    sync_interval_minutes: 30
    file_extensions:
      - ".py"
      - ".js"
      - ".ts"
      - ".tsx"
      - ".java"
      - ".go"
      - ".rs"
      - ".md"
      - ".yaml"
      - ".yml"
      - ".json"
      - ".toml"
      - ".sql"
      - ".sh"
      - ".dockerfile"
    max_file_size_kb: 500

  dropbox:
    enabled: false
    app_key: "${DROPBOX_APP_KEY:}"
    app_secret: "${DROPBOX_APP_SECRET:}"
    refresh_token: "${DROPBOX_REFRESH_TOKEN:}"
    sync_folder: "/DeepMindWorkspace"
    sync_interval_minutes: 15

  google_drive:
    enabled: false
    client_id: "${GOOGLE_CLIENT_ID:}"
    client_secret: "${GOOGLE_CLIENT_SECRET:}"
    redirect_uri: "${GOOGLE_REDIRECT_URI:http://localhost:8080/api/connectors/google/callback}"
    scopes:
      - "https://www.googleapis.com/auth/drive.readonly"
      - "https://www.googleapis.com/auth/drive.metadata.readonly"
    sync_interval_minutes: 15
    dev_scaffold:
      enabled: true
      search_triggers:
        - "how to implement"
        - "documentation for"
        - "code example"
        - "framework reference"
        - "architecture pattern"
      file_types:
        - "application/pdf"
        - "text/plain"
        - "text/markdown"
        - "application/vnd.google-apps.document"

ui:
  theme: "dark"
  title: "DeepMind Workspace"
  sidebar_width: 340
  message_max_display: 200
  token_warning_percent: 80
  token_critical_percent: 95
  animations: true
  font_family: "Inter, system-ui, -apple-system, sans-serif"
  code_font: "JetBrains Mono, Fira Code, monospace"
  
  # Tool controls (smooth sliders/toggles)
  code_controls:
    show_timeout_slider: true
    show_output_limit_slider: true
    timeout_min: 10
    timeout_max: 600  # 10 minutes max
    output_limit_presets: ["1MB", "10MB", "50MB", "100MB"]
  
  image_controls:
    show_model_selector: true
    show_size_presets: true
    show_quality_slider: true
    size_presets:
      - "512x512"
      - "768x768"
      - "1024x1024"
      - "1024x1536 (Portrait)"
      - "1536x1024 (Landscape)"
      - "2048x2048 (Ultra)"
